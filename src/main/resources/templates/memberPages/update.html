<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap2.css}">
</head>
<th:block th:replace="commonPages/mypageheader :: header"></th:block>
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<style>
    . title {


    }
</style>
<body>
<table class="table table-hover">
    <thead>
    <tr class="table-dark">
        <th scope="row">순번</th>
        <td>아이디</td>
        <td>비밀번호</td>
        <td>이름</td>
        <td>나이</td>
        <td>이메일주소</td>
        <td>H.P</td>
        <td>계정생성일자</td>
    </tr>
    </thead>
    <tr th:each="result: ${result}">
        <td th:text="${result.id}"></td>
        <td th:text="${result.userId}"></td>
        <td th:text="${result.memberPassword}"></td>
        <td th:text="${result.memberName}"></td>
        <td th:text="${result.memberAge}"></td>
        <td th:text="${result.memberEmail}"></td>
        <td th:text="${result.memberPhone}"></td>
        <td th:text="*{#temporals.format(result.memberCreatedTime, 'yyyy-MM-dd')}"></td>

</table>
<div class="container">
    <div id="title " style="margin-top: 100px">
        <h1>회원정보수정</h1>
    </div>
    <tr>
        <th>

        </th>
    </tr>

    <form action="/member/update" method="post">
        <div class="form-group">
            <label for="exampleInputEmail1" class="form-label mt-4">아이디</label>
            <input type="text" class="form-control" id="exampleInputEmail1" th:value="${result.userId}" name="userId"
                   aria-describedby="eailHelp" readonly>
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">변경할비밀번호</label>
            <input type="text" class="form-control" id="pw1" name="memberPassword"
                   aria-describedby="eailHelp" placeholder="변경할 패스워드를 입력 해주세요" onblur="pwcheck()" required>
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">2차비밀번호</label>
            <input type="text" class="form-control"  name="memberPassword2" th:value="${result.memberPassword2}"
                   aria-describedby="eailHelp" placeholder="변경할 패스워드를 입력 해주세요"  >
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">이름</label>
            <input type="text" class="form-control" id="exampleInputEmail1" th:value="${result.memberName}"
                   name="memberName"
                   aria-describedby="eailHelp" readonly>
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">나이</label>
            <input type="text" class="form-control" id="exampleInputEmail1" name="memberAge"
                   th:value="${result.memberAge}"
                   aria-describedby="eailHelp" readonly>
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">이메일</label>
            <input type="text" class="form-control" id="exampleInputEmail1" name="memberEmail"
                   th:value="${result.memberEmail}"
                   aria-describedby="eailHelp" readonly>
            <small id="emailHelp" class="form-text text-muted"></small>
            <label for="exampleInputEmail1" class="form-label mt-4">H.P</label>
            <input type="text" class="form-control" id="exampleInputEmail1" name="memberPhone"
                   th:value="${result.memberPhone}"
                   aria-describedby="eailHelp" readonly>
            <small id="emailHelp" class="form-text text-muted"></small>
        </div>
        <br>
        <button type="submit" class="btn btn-secondary" tnclick="save()">정보수정</button>
    </form>
</div>
</body>
<script>
    function pwcheck(check) {
        const pwchange = document.getElementById("pw1").value;
        const exp = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,16}$/;
        if (!pwchange.match(exp)) {
            result_pw.innerHTML = "8자~16자의 영문 대 소문자, 숫자, 특수문자(!@#$%^&*)를 사용하세요.";
            result_pw.style.color = "#aa3636";
            result_pw.style.display = "block";
            result_pw.setAttribute("aria-hidden", false);
            check = false;
        } else {
            function signup() {
                location.href = "member/update";
            }
        }
    }
</script>
</tr>
</html>